query UserSummary($date: Date) {
  userSummary(date: $date) {
    users {
      enabled
      disabled
    }
    appRoles {
      role
      count
    }
  }
}

query GetUserSnapshot(
  $date: Date
  $filters: UserReportFilter
  $after: Int
  $limit: Int
) {
  userSnapshot(date: $date, filters: $filters, after: $after, limit: $limit) {
    results {
      id
      name
      email
      createdAt
      enabled
      roles
      datasets {
        datasetId
        role
      }
    }
    pageInfo {
      startCursor
      endCursor
      hasNextPage
      aggregateCount
    }
  }
}

query GetUserChangelog(
  $sdate: Date
  $edate: Date
  $filters: UserReportFilter
  $after: Int
  $limit: Int
) {
  userChangelog(
    startDate: $sdate
    endDate: $edate
    filters: $filters
    after: $after
    limit: $limit
  ) {
    results {
      id
      date
      userEmail
      updaterEmail
      previousDatasets {
        datasetId
        role
      }
      changesMade
    }
    pageInfo {
      aggregateCount
      hasNextPage
      endCursor
    }
  }
}

mutation UserSnapshotReport($date: Date, $filters: UserReportFilter) {
  userSnapshotReport(date: $date, filters: $filters, reportFormat: CSV) {
    jobId
  }
}

mutation UserChangelogReport(
  $sdate: Date
  $edate: Date
  $filters: UserReportFilter
) {
  userChangelogReport(
    startDate: $sdate
    endDate: $edate
    filters: $filters
    reportFormat: JSON
  ) {
    jobId
  }
}
